<%- include('header') %>

<div class="page-wrapper">
  <!-- ============================================================== -->
  <!-- Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <div class="page-breadcrumb">
    <div class="row">
      <div class="col-12 d-flex no-block align-items-center">
        <h4 class="page-title">Form Basic</h4>
        <div class="ms-auto text-end">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Home</a></li>
              <li class="breadcrumb-item active" aria-current="page">
                Library
              </li>
            </ol>
          </nav>
        </div>
      </div>
    </div>
  </div>
  <!-- ============================================================== -->
  <!-- End Bread crumb and right sidebar toggle -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- Container fluid  -->
  <!-- ============================================================== -->
  <div class="container-fluid">
    <!-- ============================================================== -->
    <!-- Start Page Content -->
    <!-- ============================================================== -->
    <div class="row">
      <div class="col-md-6">
        <div class="card">
          <form class="form-horizontal" method="post" action="/exsubcatagory/updateexsubcatagory">
            <input type="hidden" value="<%= single.id %>" name="editid">

            <div class="card-body">
              <h4 class="card-title">Personal Info</h4>
              <div class="form-group row">
                <label
                  for="fname"
                  name="name"
                  class="col-sm-3 text-center control-label col-form-label"
                  >Catagory Name</label
                  >
                <div class="col-sm-9">
                    <select name="catagory" class="form-control">
                        <option value="">---select catagory---</option>
                       <% catagory.map((cat) => { %>
                        <% if (cat.catagory_name==single.catagoryId.catagory_name) { %>
                          <option selected value="<%= cat.id %>">
                              <%= cat.catagory_name %>
                          </option>
                          <% } else { %>
                              <option value="<%= cat.id %>">
                                  <%= cat.catagory_name %>
                              </option>
                              <% } %>
                                  <% }) %>
                    </select>
                    
                </div>
              </div>
              <div class="form-group row">
                <label
                  for="fname"
                  name="name"
                  class="col-sm-3 text-center control-label col-form-label"
                  >SubCatagory Name</label
                >
                <div class="col-sm-9">
                    <select name="subcatagory" class="form-control">
                        <option value="">---select catagory---</option>
                       <% subcatagory.map((cat) => { %>
                        <% if (cat.subcatagory==single.subcatagoryId.subcatagory) { %>
                          <option selected value="<%= cat.id %>">
                              <%= cat.subcatagory %>
                          </option>
                          <% } else { %>
                              <option value="<%= cat.id %>">
                                  <%= cat.subcatagory %>
                              </option>
                              <% } %>
                                  <% }) %>
                    </select>
                </div>
              </div>
              <div class="form-group row">
                <label
                  for="fname"
                  name="name"
                  class="col-sm-3 text-center control-label col-form-label"
                  >ExtraSub catagory :</label
                >
                <div class="col-sm-9">
                  <input
                    type="text"
                    class="form-control"
                    id="fname" name="exsubcatagory"
                    placeholder="sub catagory Name Here"
                    value="<%= single.exsubcatagory %>"
                  />
                </div>
              </div>
            </div>
            <div class="border-top">
              <div class="card-body">
                <button type="submit" class="btn btn-primary">
                  Submit
                </button>
              </div>
            </div>
          </form>
        </div>
       
        
      </div>
      
    </div>
    <!-- editor -->
  
    <!-- ============================================================== -->
    <!-- End PAge Content -->
    <!-- ============================================================== -->
    <!-- ============================================================== -->
    <!-- Right sidebar -->
    <!-- ============================================================== -->
    <!-- .right-sidebar -->
    <!-- ============================================================== -->
    <!-- End Right sidebar -->
    <!-- ============================================================== -->
  </div>
  <!-- ============================================================== -->
  <!-- End Container fluid  -->
  <!-- ============================================================== -->
  <!-- ============================================================== -->
  <!-- footer -->
  <!-- ============================================================== -->

  <!-- ============================================================== -->
  <!-- End footer -->
  <!-- ============================================================== -->
</div>

<%- include('footer') %>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script>
  const categoryRecord = (req , res) => {
  let catagory = document.getElementById("catagory").value;
  $.ajax({
    type : 'GET',
    url : `/exsubcatagory/ajaxgetCatagory?id=${catagory}`,
    success : function(res){
      let tbl = "";
      let catagory = res.catagory
      tbl += `<option value="">---- select catagory ----</option>`;
      catagory.map((subcat)=>{
        console.log(subcat);
        
        tbl += `
          <option value="${subcat._id}">${subcat.subcatagory}</option>
        `
      })
      document.getElementById("subcatagory").innerHTML = tbl;



    }
  })
}
</script>